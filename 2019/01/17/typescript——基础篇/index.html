<!DOCTYPE html>
<html lang="zh-Hans">
  <head><meta name="generator" content="Hexo 3.9.0"><link rel="manifest" href="/manifest.json"><meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">


<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">

<meta name="theme-color" content="#f8f5ec">
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">

<meta name="description" content="typescript——基础篇"><meta name="keywords" content="Seven YuanZiWen"><link rel="alternate" href="/atom.xml" title="Seven Blog"><link rel="shortcut icon" type="image/x-icon" href="https://static.yuanziwen.cn/blog/favicon.ico?v=2.11.0">
<link rel="canonical" href="blog.yuanziwen.cn/2019/01/17/typescript——基础篇/">

<link rel="stylesheet" type="text/css" href="/lib/fancybox/jquery.fancybox.css">
<link rel="stylesheet" type="text/css" href="/css/style.css?v=2.11.0">

<script id="baidu_analytics">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?1e4ffaffd9b2bc832b39e2b866a92c7b";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script><script id="baidu_push">
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
<script>
  window.config = {"leancloud":{"app_id":null,"app_key":null},"toc":true,"fancybox":true,"pjax":"","latex":false};
</script>

    <title>typescript——基础篇 - Seven Blog</title>
  </head>

  <body><div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/." class="logo">Seven Blog</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>

<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list"><a href="/">
        <li class="mobile-menu-item">Home
          </li>
      </a><a href="/archives/">
        <li class="mobile-menu-item">Record
          </li>
      </a><a href="/music/">
        <li class="mobile-menu-item">Music(NoAuto)
          </li>
      </a><a href="/photo/">
        <li class="mobile-menu-item">Album
          </li>
      </a><a href="/book/">
        <li class="mobile-menu-item">Book
          </li>
      </a></ul>
</nav>
<div class="container" id="mobile-panel">
      <header id="header" class="header"><div class="logo-wrapper">
  <a href="/." class="logo">Seven Blog</a>
</div>

<nav class="site-navbar"><ul id="menu" class="menu"><li class="menu-item">
          <a class="menu-item-link" href="/">
            Home
            </a>
        </li>
      <li class="menu-item">
          <a class="menu-item-link" href="/archives/">
            Record
            </a>
        </li>
      <li class="menu-item">
          <a class="menu-item-link" href="/music/">
            Music(NoAuto)
            </a>
        </li>
      <li class="menu-item">
          <a class="menu-item-link" href="/photo/">
            Album
            </a>
        </li>
      <li class="menu-item">
          <a class="menu-item-link" href="/book/">
            Book
            </a>
        </li>
      </ul></nav>
</header>

      <main id="main" class="main">
        <div class="content-wrapper">
          <div id="content" class="content"><article class="post">
    <header class="post-header">
      <h1 class="post-title">typescript——基础篇
        </h1>

      <div class="post-meta">
        <span class="post-time">
          2019-01-17
        </span></div>
    </header>

    <div class="post-toc" id="post-toc">
    <h2 class="post-toc-title">Contents</h2>
    <div class="post-toc-content">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#基本"><span class="toc-text">基本</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#下标索引"><span class="toc-text">下标索引</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#枚举-enum"><span class="toc-text">枚举 enum</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#interface"><span class="toc-text">interface</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#函数重载"><span class="toc-text">函数重载</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#命名空间"><span class="toc-text">命名空间</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#多个文件共同声明"><span class="toc-text">多个文件共同声明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#引用当前命名"><span class="toc-text">引用当前命名</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#合并"><span class="toc-text">合并</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#声明文件"><span class="toc-text">声明文件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#全局类库"><span class="toc-text">全局类库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Node"><span class="toc-text">Node</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ES-UMD"><span class="toc-text">ES(UMD)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#自定义方法"><span class="toc-text">自定义方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#全局方法"><span class="toc-text">全局方法</span></a></li></ol></li></ol>
    </div>
  </div><div class="post-content"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-tag-hint@0.2.1/css/hint.min.css"><p><img src="https://static.yuanziwen.cn/blob/typescript/1.jpg_plain" alt="alt"></p>
<a id="more"></a>

<h2 id="基本"><a href="#基本" class="headerlink" title="基本"></a>基本</h2><figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">// javascript</span></span><br><span class="line"><span class="keyword">let</span> name = <span class="string">'Ryan'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// typescript</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> name:<span class="built_in">string</span> = <span class="string">'Ryan'</span></span><br><span class="line"><span class="keyword">let</span> num:<span class="built_in">number</span> = <span class="number">10</span></span><br><span class="line"><span class="keyword">let</span> bool:<span class="built_in">boolean</span> = <span class="literal">true</span></span><br><span class="line"><span class="keyword">let</span> anyThing:<span class="built_in">any</span> = &#123;&#125;</span><br><span class="line"><span class="keyword">let</span> und:<span class="built_in">void</span> = <span class="literal">undefined</span></span><br><span class="line"><span class="keyword">let</span> arr:<span class="built_in">number</span>[] = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"><span class="keyword">let</span> arr:<span class="built_in">Array</span>&lt;<span class="built_in">number</span>&gt; = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"><span class="keyword">let</span> arr:<span class="built_in">Array</span>&lt;<span class="built_in">string</span>&gt; = [<span class="string">'seven'</span>,<span class="string">'Floyd'</span>]</span><br></pre></td></tr></table></figure>

<h2 id="下标索引"><a href="#下标索引" class="headerlink" title="下标索引"></a>下标索引</h2><figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">interface</span> StringArray &#123;</span><br><span class="line">  [index: <span class="built_in">number</span>]: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 可以通过index(number类型) 取到值为string的值</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> Animal: StringArray;</span><br><span class="line">Animal = [<span class="string">"Dog"</span>, <span class="string">"Cat"</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// error</span></span><br><span class="line"><span class="keyword">let</span> pets: <span class="built_in">number</span> = Animal[<span class="number">1</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// ok</span></span><br><span class="line"><span class="keyword">let</span> pets: <span class="built_in">string</span> = Animal[<span class="number">1</span>];</span><br></pre></td></tr></table></figure>

<h2 id="枚举-enum"><a href="#枚举-enum" class="headerlink" title="枚举 enum"></a>枚举 enum</h2><p>在JavaScript中枚举通常代表着对象，可以通过key拿到value，<code>{key:&#39;value&#39;}</code> ，但是(除了遍历)无法通过value拿到key，这导致变成<code>单向枚举</code>。</p>
<p>而ts中则不存在这个问题，通过枚举能得到对应元素的下标（i.e. 枚举属性），相反也能通过下标得到元素（反向映射）。</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">enum</span> Animal &#123;</span><br><span class="line">    Dog,</span><br><span class="line">    Cat,</span><br><span class="line">    Lion</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> pets = Animal[<span class="number">0</span>] <span class="comment">// Dog</span></span><br><span class="line"><span class="keyword">let</span> index = Animal.Cat <span class="comment">// 1</span></span><br><span class="line"><span class="string">``</span><span class="string">` </span></span><br><span class="line"><span class="string">`</span>Dog<span class="string">` 为枚举成员，下标为枚举属性。其原理为</span></span><br><span class="line"><span class="string">`</span><span class="string">``</span> js</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> Animal;</span><br><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">Annimal</span>)</span>&#123;</span><br><span class="line">    Animal[(Animal[<span class="string">'Dog'</span>] = <span class="number">0</span>)] = <span class="string">'Dog'</span>; </span><br><span class="line">    Animal[(Animal[<span class="string">'Cat'</span>] = <span class="number">1</span>)] = <span class="string">'Cat'</span>;</span><br><span class="line">    Animal[(Animal[<span class="string">'Lion'</span>] = <span class="number">2</span>)] = <span class="string">'Lion'</span>;</span><br><span class="line">&#125;)(Animal || Animal = &#123;&#125;)</span><br></pre></td></tr></table></figure>

<p>这个语法可能不太清晰。打开控制台</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123; <span class="attr">a</span>: <span class="number">1</span> &#125; <span class="comment">// undefined</span></span><br><span class="line"><span class="comment">// or -------------</span></span><br><span class="line"><span class="keyword">var</span> obj = &#123;&#125;</span><br><span class="line"><span class="built_in">console</span>.log(obj.str = <span class="string">'animal'</span>) <span class="comment">// animal</span></span><br></pre></td></tr></table></figure>

<p>var语句没有返回值，运行时赋值语句返回的是值。<br>所以，上面枚举编译后的语句实际上是将下标和元素都赋值到同一个对象上</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">Animal.Dog = <span class="number">0</span> <span class="comment">// 0</span></span><br><span class="line">Animal[<span class="string">'0'</span>] = <span class="string">'Dog'</span> <span class="comment">//Dog</span></span><br><span class="line"><span class="built_in">console</span>.log(Animal) &#123;<span class="string">'0'</span>: <span class="string">'Dog'</span>,<span class="string">'Dog'</span>: <span class="number">0</span>&#125;</span><br></pre></td></tr></table></figure>

<p>枚举对象可以当成普通的变量来使用。但是所有枚举成员与属性拥有只读特性 不允许更改枚举属性。当然枚举属性(下标)也能自定义</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">enum</span> Animal &#123;</span><br><span class="line">  Lion = <span class="number">-1</span>, <span class="comment">// 可以为负数</span></span><br><span class="line">  Dog = <span class="number">2</span>,</span><br><span class="line">  Rabbit,  <span class="comment">// 3 ，如果上一个是number，默认自增</span></span><br><span class="line">  Tiger = <span class="built_in">Math</span>.random(), <span class="comment">// 可以为表达式，但是后续成员的自增默认值会失效 ↓</span></span><br><span class="line">  Other, <span class="comment">// Error : Enum member must have initializer</span></span><br><span class="line">  Cat = <span class="string">'123'</span>.length, <span class="comment">// 自定义</span></span><br><span class="line">  Bird = Dog * <span class="number">2</span>, <span class="comment">// 4 ，可以为当前已定义属性，但是必须是已经定义的</span></span><br><span class="line">  Elephant = <span class="string">'elep'</span>, <span class="comment">// 也可以为字符串 'str'，不建议string和number混用</span></span><br><span class="line">&#125;</span><br><span class="line">Animal.Lion = <span class="number">1</span> <span class="comment">// Error : read-only property</span></span><br></pre></td></tr></table></figure>

<p>可以用做类型约束，表示只接受该值</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">enum</span> Animal &#123;</span><br><span class="line">  Cat,</span><br><span class="line">  Tiger</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> Pets &#123;</span><br><span class="line">  is: Animal.Cat, <span class="comment">// is属性只能为Cat</span></span><br><span class="line">  skill: <span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> newPets : Pets = &#123;</span><br><span class="line">  <span class="comment">// 养错了，大兄弟，Tiger 不能赋值给 Cat</span></span><br><span class="line">  is: Animal.Tiger, <span class="comment">// Error: Type 'Animal.Tiger' is not assignable to type 'Animal.Cat'</span></span><br><span class="line">  skill: <span class="string">'安利，吃猫粮，鼓励师'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上面枚举对象可以当成一个对象来使用，但是如果仅仅作为字面量枚举，使用后自动销毁，可以使用常量枚举，它仅存在编译时：</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 编译前</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">enum</span> Animal&#123;</span><br><span class="line">    Cat,</span><br><span class="line">    Tiger = <span class="number">2</span> ,</span><br><span class="line">    <span class="comment">// Lion = Math.random() /* Error, 不允许调用方法 */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> catIdx = Animal.Cat</span><br><span class="line"><span class="built_in">console</span>.log(Animal)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 编译后</span></span><br><span class="line"><span class="keyword">let</span> catIdx = <span class="number">0</span></span><br><span class="line"><span class="built_in">console</span>.log(Animal) <span class="comment">// Error : Animal is not defined。</span></span><br></pre></td></tr></table></figure>

<ul>
<li>数字枚举初始为0，往后自增，直到某个枚举属性为非number</li>
<li>字符串枚举没有自增机制，要求后续的每个成员都显式初始化枚举属性。</li>
<li>字符串枚举不支持反向映射。但相比数字枚举，字符串枚举优势是可读性高。</li>
<li>枚举成员与属性不允许修改。</li>
<li>常量枚举除了只允许使用字面量赋值(i.e. 非计算)，其他规则与非常量枚举相同。</li>
</ul>
<h2 id="interface"><a href="#interface" class="headerlink" title="interface"></a>interface</h2><p>interface 译名 接口，</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">interface User &#123;</span><br><span class="line">    name: string</span><br><span class="line">    age?: number</span><br><span class="line">    readonly where: boolean</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>属性名之前可以申明标识符，表示属性特性。</p>
<h3 id="函数重载"><a href="#函数重载" class="headerlink" title="函数重载"></a>函数重载</h3><p>在同一接口中多次定义同一函数的情况。</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">interface</span> Options &#123;</span><br><span class="line">  name:<span class="built_in">string</span></span><br><span class="line">  <span class="keyword">get</span>(age: <span class="string">'age'</span>): <span class="built_in">number</span></span><br><span class="line">  <span class="keyword">get</span>(job: <span class="built_in">string</span>): <span class="built_in">void</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> Options &#123;</span><br><span class="line">  height: <span class="built_in">string</span></span><br><span class="line">  <span class="keyword">get</span>(other: <span class="built_in">string</span>[]): <span class="built_in">void</span></span><br><span class="line">  <span class="keyword">get</span>(phone: <span class="string">'phone'</span>): <span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> Me:Options &#123;</span><br><span class="line">  name: <span class="string">'Seven'</span>,</span><br><span class="line">  height: <span class="string">'1.78'</span>,</span><br><span class="line">  <span class="keyword">get</span>(<span class="string">'age'</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Math</span>.random()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>当同一接口定义多个<code>get</code>，将根据从下到上(从文件最底部往顶部)，从字面量到类型的方式进行优先级排列进行匹配。</p>
<p>字面量参数(下) &gt; 字面量参数(上) &gt; 参数类型(下) &gt; 参数类型(上) &gt; 子类型。</p>
<p>以上排序为</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">interface</span> Options &#123;</span><br><span class="line">  name:<span class="built_in">string</span></span><br><span class="line">  <span class="keyword">get</span>(age: <span class="string">'age'</span>): <span class="built_in">number</span> <span class="comment">// 2</span></span><br><span class="line">  <span class="keyword">get</span>(job: <span class="built_in">string</span>): <span class="built_in">void</span>  <span class="comment">// 5</span></span><br><span class="line">  <span class="keyword">get</span>(like: <span class="string">'like'</span>): <span class="built_in">string</span> <span class="comment">// 3</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> Options &#123;</span><br><span class="line">  height: <span class="built_in">string</span></span><br><span class="line">  <span class="keyword">get</span>(other: <span class="built_in">string</span>[]): <span class="built_in">void</span> <span class="comment">// 4</span></span><br><span class="line">  <span class="keyword">get</span>(phone: <span class="string">'phone'</span>): <span class="built_in">string</span> <span class="comment">// 1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="命名空间"><a href="#命名空间" class="headerlink" title="命名空间"></a>命名空间</h2><p>想要解决的问题：全局变量污染。</p>
<p>虽然现在有了模块系统，但是如果使用全局类库，仍然需要命名空间来解决这个问题。</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">namespace</span> Me &#123;</span><br><span class="line">  <span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getAge</span>(<span class="params"></span>):<span class="title">number</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">24</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 公开变量</span></span><br><span class="line">  <span class="keyword">export</span> <span class="keyword">var</span> name: <span class="built_in">string</span> = <span class="string">'Seven'</span></span><br><span class="line">  <span class="comment">// 局部变量</span></span><br><span class="line">  <span class="keyword">var</span> password: <span class="built_in">string</span> = <span class="string">'123456'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="多个文件共同声明"><a href="#多个文件共同声明" class="headerlink" title="多个文件共同声明"></a>多个文件共同声明</h3><figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">// a.ts</span></span><br><span class="line"><span class="keyword">namespace</span> Me &#123;</span><br><span class="line">  <span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getAge</span>(<span class="params"></span>):<span class="title">number</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">24</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// b.ts</span></span><br><span class="line"><span class="keyword">namespace</span> Me &#123;</span><br><span class="line">  <span class="keyword">export</span> <span class="keyword">var</span> name: <span class="built_in">string</span> = <span class="string">'Seven'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Me <span class="comment">// &#123; name, getAge &#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="引用当前命名"><a href="#引用当前命名" class="headerlink" title="引用当前命名"></a>引用当前命名</h3><p>上个例子：在b.ts中要拿到getAge是不能直接读取的。</p>
<p>需要在b.ts顶部加上</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">/// &lt;reference path="a.ts" /&gt;</span></span><br></pre></td></tr></table></figure>

<p>path为相对路径，绝对路径为 <code>types</code> ，默认到 <code>node_modules/@types/</code> 下查找。</p>
<h2 id="合并"><a href="#合并" class="headerlink" title="合并"></a>合并</h2><p>在写interface接口时，我们不用去特别注意是否已经声明过。比如</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">interface</span> FullName &#123;</span><br><span class="line">  firstName: <span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> FullName &#123;</span><br><span class="line">  lastName: <span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getName</span>(<span class="params">name:FullName</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> name.firstName + name.lastName</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">getName(&#123;</span><br><span class="line">  firstName: <span class="string">'Seven'</span>,</span><br><span class="line">  lastName: <span class="string">'Yzw'</span></span><br><span class="line">&#125;) <span class="comment">// SevenYzw</span></span><br></pre></td></tr></table></figure>

<p>接口能自动合并，命名空间也可以和其他类型合并。</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Lib</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line"><span class="keyword">namespace</span> Lib &#123;</span><br><span class="line">  <span class="keyword">export</span> <span class="keyword">const</span> version:<span class="built_in">string</span> = <span class="string">'1.0.0'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> Lib &#123;&#125;</span><br><span class="line"><span class="keyword">namespace</span> Lib &#123;</span><br><span class="line">  <span class="keyword">export</span> <span class="keyword">const</span> state = &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">enum</span> Lib &#123;</span><br><span class="line">  color,</span><br><span class="line">  size</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">namespace</span> Lib &#123;</span><br><span class="line">  <span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">multiplication</span> (<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>namespace （除了枚举）必须在其他类型的后面。</p>
<h2 id="声明文件"><a href="#声明文件" class="headerlink" title="声明文件"></a>声明文件</h2><p>在使用第三方库或者是全局类库、工具库的时候，会提示没有声明文件。可以通过引入声明文件的方式解决。</p>
<h3 id="全局类库"><a href="#全局类库" class="headerlink" title="全局类库"></a>全局类库</h3><p>如果只是普通的类库</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// src/lib/globalLib.js</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">globalLib</span>(<span class="params">options</span>)</span>&#123;</span><br><span class="line">  <span class="comment">// dst...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">globalLib.version = <span class="string">'1.0.0'</span></span><br><span class="line"></span><br><span class="line">globalLib.doSomething = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="comment">// dst...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>则声明文件为</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">// src/lib/globalLib.d.ts</span></span><br><span class="line"><span class="keyword">declare</span> <span class="function"><span class="keyword">function</span> <span class="title">globalLib</span>(<span class="params">option:globalLib.Options</span>):<span class="title">void</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">declare</span> <span class="keyword">namespace</span> globalLib &#123;</span><br><span class="line">  <span class="keyword">const</span> version : <span class="built_in">string</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">doSomething</span>(<span class="params"></span>): <span class="title">void</span></span>;</span><br><span class="line">  <span class="keyword">interface</span> Options &#123;</span><br><span class="line">    [key: <span class="built_in">string</span>]: <span class="built_in">any</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Node"><a href="#Node" class="headerlink" title="Node"></a>Node</h3><p>Node遵循的是 <code>CommonJS</code> 规范，导出语句使用的是 <code>module.exports / exports</code>。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// /src/Lib/utils/common.js</span></span><br><span class="line"><span class="keyword">const</span> version = <span class="string">'1.0.0'</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">doSomething</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="comment">// dst...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">moduleLib</span>(<span class="params">options</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> options</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">moduleLib.version = version;</span><br><span class="line">moduleLib.doSomething = doSomething</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = moduleLib;</span><br></pre></td></tr></table></figure>

<p>对应的声明文件</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">// /src/Lib/utils/common.d.ts</span></span><br><span class="line"><span class="keyword">declare</span> <span class="function"><span class="keyword">function</span> <span class="title">moduleLib</span>(<span class="params">options:Options</span>):<span class="title">Options</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">interface</span> <span class="title">Options</span> </span>&#123;</span><br><span class="line">  [key: <span class="built_in">string</span>]: <span class="built_in">any</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">declare</span> <span class="keyword">namespace</span> moduleLib&#123;</span><br><span class="line">  <span class="keyword">const</span> version: <span class="built_in">string</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">doSomething</span>(<span class="params"></span>): <span class="title">void</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> = moduleLib</span><br></pre></td></tr></table></figure>

<h3 id="ES-UMD"><a href="#ES-UMD" class="headerlink" title="ES(UMD)"></a>ES(UMD)</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// /src/Lib/utils/umd.js</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">root, factory</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> define === <span class="string">'function'</span> &amp;&amp; define.amd) &#123;</span><br><span class="line">        define([], factory);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">typeof</span> exports === <span class="string">'object'</span>) &#123;</span><br><span class="line">        <span class="built_in">module</span>.exports = factory();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        root.umbLib = factory();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;(<span class="keyword">this</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      version: <span class="string">'1.0.0'</span>,</span><br><span class="line">      doSomething:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="comment">// dst...</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;));</span><br></pre></td></tr></table></figure>

<p>umd声明文件</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">// /src/Lib/utils/umd.d.ts</span></span><br><span class="line"><span class="keyword">declare</span> <span class="keyword">namespace</span> umdLib &#123;</span><br><span class="line">  <span class="keyword">const</span> version: <span class="built_in">string</span></span><br><span class="line">  <span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">doSomething</span>(<span class="params"></span>): <span class="title">void</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">as</span> <span class="keyword">namespace</span> umdLib;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> umdLib</span><br></pre></td></tr></table></figure>

<h3 id="自定义方法"><a href="#自定义方法" class="headerlink" title="自定义方法"></a>自定义方法</h3><p>有时候我们需要向类库添加方法。</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> utils <span class="keyword">from</span> <span class="string">'utils'</span>;</span><br><span class="line"></span><br><span class="line">utils.formatTime = <span class="function">(<span class="params">timestamp</span>) =&gt;</span> &#123; <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Date</span>(timestamp)&#125;</span><br></pre></td></tr></table></figure>

<p>则这样声明</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">declare</span> <span class="keyword">module</span> "utils" &#123;</span><br><span class="line">  <span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">formatTime</span>(<span class="params">timestamp: <span class="built_in">number</span></span>): <span class="title">string</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">utils.formatTime(<span class="number">1537278497957</span>)</span><br></pre></td></tr></table></figure>

<h3 id="全局方法"><a href="#全局方法" class="headerlink" title="全局方法"></a>全局方法</h3><figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">declare</span> global &#123;</span><br><span class="line">  <span class="keyword">namespace</span> globalLib &#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">doSomething</span> (<span class="params"></span>):<span class="title">void</span></span></span><br><span class="line"><span class="function">  &#125;</span></span><br><span class="line"><span class="function">&#125;</span></span><br></pre></td></tr></table></figure>

<p>然后就可以向 <code>globalLib</code> 全局类库，添加 <code>doSomething</code> 方法。不建议这么做，因为会造成全局污染。</p>

      </div>
      <div class="post-copyright">
    <p class="copyright-item">
      <span>Author: </span>
      <a href="blog.yuanziwen.cn">Seven</a>
    </p>
    <p class="copyright-item">
      <span>Link: </span>
      <a href="blog.yuanziwen.cn/2019/01/17/typescript——基础篇/">blog.yuanziwen.cn/2019/01/17/typescript——基础篇/</a>
    </p>
    <p class="copyright-item">
      <span>License: </span><a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/" target="_blank">知识共享署名-非商业性使用 4.0 国际许可协议</a>
    </p>
  </div>
      <footer class="post-footer">
        <div class="post-tags">
            <a href="/tags/typescript/">typescript</a>
            </div>
        
        <nav class="post-nav"><a class="prev" href="/2019/03/13/d3数据可视化/">
        <i class="iconfont icon-left"></i>
        <span class="prev-text nav-default">d3数据可视化(2)——折线图篇</span>
        <span class="prev-text nav-mobile">Prev</span>
      </a>
    <a class="next" href="/2018/12/19/设计模式/">
        <span class="next-text nav-default">JavaScript设计模式</span>
        <span class="prev-text nav-mobile">Next</span>
        <i class="iconfont icon-right"></i>
      </a>
    </nav></footer>
    </article></div><div class="comments" id="comments"></div></div>
      </main>
  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  <script src="//unpkg.com/valine/dist/Valine.min.js"></script>
  
  <script type="text/javascript">
    var GUEST = ['nick','mail','link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item=>{
      return GUEST.indexOf(item)>-1;
    });
    new Valine({
        el: '#comments' ,
        verify: false,
        notify: false,
        appId: 'cxeaTV5BFDCxPmxoCcG9QPxf-gzGzoHsz',
        appKey: 's577OrPG5sB4Szom6mvHuI1X',
        placeholder: 'Just go go',
        avatar:'mm',
        guest_info: guest,
        pageSize:'10' || 10,
    });
  </script>

<footer id="footer" class="footer"><div class="social-links"><a href="mailto:yuanziwen7489757@gmail.com" class="iconfont icon-email" title="email"></a>
          <a href="https://juejin.im/user/59aa31a06fb9a02485103ddf" class="iconfont juejin" title="掘金"><div class="img"></div></a>
        <a href="https://github.com/yzw7489757" class="iconfont icon-github" title="github"></a>
        </div><div class="copyright">
  <!--<span class="division">|</span>
  <span class="theme-info">
    footer.theme - 
    <a class="theme-link" href="https://github.com/ahonn/hexo-theme-even">Even</a>
  </span>-->
  <span class="power-by">
   <a href="http://www.beian.miit.gov.cn" target="_blank">浙ICP备18011257号-1</a>
  </span>
  <span class="copyright-year">&copy;2017 - 2020<span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">Seven</span>
  </span>
</div>
</footer>

      <div class="back-to-top" id="back-to-top">
        <i class="iconfont icon-up"></i>
      </div>
    </div><script type="text/javascript" src="/lib/jquery/jquery.min.js"></script>
  <script type="text/javascript" src="/lib/slideout/slideout.js"></script>
  <script type="text/javascript" src="/lib/fancybox/jquery.fancybox.pack.js"></script>
  <script type="text/javascript" src="/js/src/even.js?v=2.11.0"></script>
<script>if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('/sw.js?t=1593502596546')
    .then(function () {console.log('ServiceWorker Register Successfully.')})
    .catch(function (e) {console.error(e)});
}
</script></body>
</html>
