<!DOCTYPE html>
<html lang="zh-Hans">
  <head><meta name="generator" content="Hexo 3.9.0"><link rel="manifest" href="/manifest.json"><meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">


<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">

<meta name="theme-color" content="#f8f5ec">
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">

<meta name="description" content="布局笔记"><meta name="keywords" content="Seven YuanZiWen"><link rel="alternate" href="/atom.xml" title="Seven Blog"><link rel="shortcut icon" type="image/x-icon" href="https://static.yuanziwen.cn/blog/favicon.ico?v=2.11.0">
<link rel="canonical" href="blog.yuanziwen.cn/2017/03/04/布局笔记/">

<link rel="stylesheet" type="text/css" href="/lib/fancybox/jquery.fancybox.css">
<link rel="stylesheet" type="text/css" href="/css/style.css?v=2.11.0">

<script id="baidu_analytics">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?1e4ffaffd9b2bc832b39e2b866a92c7b";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script><script id="baidu_push">
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
<script>
  window.config = {"leancloud":{"app_id":null,"app_key":null},"toc":true,"fancybox":true,"pjax":"","latex":false};
</script>

    <title>布局笔记 - Seven Blog</title>
  </head>

  <body><div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/." class="logo">Seven Blog</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>

<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list"><a href="/">
        <li class="mobile-menu-item">Home
          </li>
      </a><a href="/archives/">
        <li class="mobile-menu-item">Record
          </li>
      </a><a href="/logs/">
        <li class="mobile-menu-item">Log
          </li>
      </a><a href="/music/">
        <li class="mobile-menu-item">Music
          </li>
      </a><a href="/photo/">
        <li class="mobile-menu-item">Album
          </li>
      </a><a href="/book/">
        <li class="mobile-menu-item">Book
          </li>
      </a></ul>
</nav>
<div class="container" id="mobile-panel">
      <header id="header" class="header"><div class="logo-wrapper">
  <a href="/." class="logo">Seven Blog</a>
</div>

<nav class="site-navbar"><ul id="menu" class="menu"><li class="menu-item">
          <a class="menu-item-link" href="/">
            Home
            </a>
        </li>
      <li class="menu-item">
          <a class="menu-item-link" href="/archives/">
            Record
            </a>
        </li>
      <li class="menu-item">
          <a class="menu-item-link" href="/logs/">
            Log
            </a>
        </li>
      <li class="menu-item">
          <a class="menu-item-link" href="/music/">
            Music
            </a>
        </li>
      <li class="menu-item">
          <a class="menu-item-link" href="/photo/">
            Album
            </a>
        </li>
      <li class="menu-item">
          <a class="menu-item-link" href="/book/">
            Book
            </a>
        </li>
      </ul></nav>
</header>

      <main id="main" class="main">
        <div class="content-wrapper">
          <div id="content" class="content"><article class="post">
    <header class="post-header">
      <h1 class="post-title">布局笔记
        </h1>

      <div class="post-meta">
        <span class="post-time">
          2017-03-04
        </span></div>
    </header>

    <div class="post-toc" id="post-toc">
    <h2 class="post-toc-title">Contents</h2>
    <div class="post-toc-content">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#布局"><span class="toc-text">布局</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#普通文档流布局"><span class="toc-text">普通文档流布局</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#浮动布局"><span class="toc-text">浮动布局</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#绝对布局"><span class="toc-text">绝对布局</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#弹性布局"><span class="toc-text">弹性布局</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#网格布局"><span class="toc-text">网格布局</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#语义化"><span class="toc-text">语义化</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Element-Class与Id"><span class="toc-text">Element Class与Id</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#BEM"><span class="toc-text">BEM</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#姓氏命名法"><span class="toc-text">姓氏命名法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#响应式页面开发"><span class="toc-text">响应式页面开发</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#viewport-meta"><span class="toc-text">viewport meta</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Media-Queries"><span class="toc-text">Media Queries</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#一个小例子"><span class="toc-text">一个小例子</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#使用-Viewport-单位及-rem"><span class="toc-text">使用 Viewport 单位及 rem</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#方法-1-仅使用-vw-作为-CSS-长度单位"><span class="toc-text">方法 1 - 仅使用 vw 作为 CSS 长度单位</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#方法-2-vw-搭配-rem，寻找最优解"><span class="toc-text">方法 2 - vw 搭配 rem，寻找最优解</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#高效CSS属性"><span class="toc-text">高效CSS属性</span></a></li></ol>
    </div>
  </div><div class="post-content"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/hexo-tag-hint@0.2.1/css/hint.min.css"><p>初学前端，有必要搞懂各种布局。</p>
<p>我们知道，页面渲染的一般过程为 JS &gt; CSS &gt; 计算样式 &gt; 布局 &gt; 绘制 &gt; 渲染层合并:<br><img src="https://static.yuanziwen.cn/blog/image/%E5%B8%83%E5%B1%80%E7%AC%94%E8%AE%B0-3.jpg_plain" alt="alt"></p>
<p>其中，Layout（重排）和 Paint（重绘） 是整个环节中最为耗时的两环，所以我们应尽量避免使用触发这两个环节的 CSS 属性。</p>
<a id="more"></a>
<h2 id="布局"><a href="#布局" class="headerlink" title="布局"></a>布局</h2><p>我们可以把网页理解成是由一个个盒子排列组合而成的，那么盒子之间又是怎么排列布局的呢？</p>
<p>网页常见的布局方式大概有五种：普通文档流布局、浮动布局（Float）、绝对布局（Absolute）、弹性布局（Flex）、网格布局（Grid）。</p>
<h3 id="普通文档流布局"><a href="#普通文档流布局" class="headerlink" title="普通文档流布局"></a>普通文档流布局</h3><p>默认的布局方式，由块级元素（display: block）和行内元素（display: inline）等组成，元素之间按照从左到右，从上到下的顺序排列。</p>
<h3 id="浮动布局"><a href="#浮动布局" class="headerlink" title="浮动布局"></a>浮动布局</h3><p>相对于普通文档流布局，浮动布局会脱离普通文档流，分为左右浮动，一般会在普通文档流布局的上面进行界面的布局，如果想避免浮动布局遮盖普通布局的情况，可以考虑使用清除浮动。</p>
<h3 id="绝对布局"><a href="#绝对布局" class="headerlink" title="绝对布局"></a>绝对布局</h3><p>元素使用 position: absolute 属性进行绝对布局，使用绝对布局的元素会脱离文档流，其定位是参考祖先元素中 position 为非 static 值的第一个元素。</p>
<h3 id="弹性布局"><a href="#弹性布局" class="headerlink" title="弹性布局"></a>弹性布局</h3><p>也称 Flex 布局，是一个完整的模块，而不是一个单一属性，其中有的属性是设置在父元素上，有些则是设置在子元素上。如果我们说传统的布局是建立在块级元素和行内元素的文本流上，那么 Flex 布局就是建立在 flex-flow 的轴方向上的。</p>
<h3 id="网格布局"><a href="#网格布局" class="headerlink" title="网格布局"></a>网格布局</h3><p>是用于制定行与列的二维 CSS 布局方法，可以将页面分割成数个主要的区域，或者用来定义组件内部元素间的大小、位置和图层之间的关系。</p>
<p>以上是常用的五种网页布局方法，在实际项目中，我们应该根据场景选择适当的方法。…</p>
<h2 id="语义化"><a href="#语义化" class="headerlink" title="语义化"></a>语义化</h2><p>HTML 的标签虽然不多，但在编写的过程中，也会时不时犹豫应该使用 div 还是 p 标签，是使用 span 还是 i 标签？不管使用哪个标签，大体上都能实现想要的效果。</p>
<p>HTML 语义化就是根据具体的内容，选择合适的标签进行代码的编写，这样既能便于开发者阅读和维护，也能让搜索引擎的爬虫更好地识别。简单的说，就是可以让机器更容易读懂网页内容。</p>
<p>如果用语义化的标签编写网页结构，可以写成如下结构：…</p>
<img src="https://static.yuanziwen.cn/blog/image/布局笔记-1.png">

<h2 id="Element-Class与Id"><a href="#Element-Class与Id" class="headerlink" title="Element Class与Id"></a>Element Class与Id</h2><p>编写 CSS 是前端开发中，比较愉快的一步。在此过程中，你可以一步步见证代码神奇的力量。编写可用的 CSS 比较容易，但是要维护它却不简单。</p>
<p>CSS 是一种定义样式结构，被用于描述网页上信息的排版方式的语言。由于其声明属性的方式不具备编程语言流程性控制的特点，而且自身「层叠」的特性，难以写出低耦合度的代码。不好好组织，容易造成不同地方的 class 相互影响，引起样式冲突等问题。所以 CSS 命名是样式代码组织中最重要的一环。</p>
<h2 id="BEM"><a href="#BEM" class="headerlink" title="BEM"></a>BEM</h2><p>在各类 CSS 命名规范中，BEM 命名规范被更多人所接受。</p>
<p>BEM 是一种基于组件的命名方法，它的基本思想是将用户界面划分成独立的模块，即使是复杂的用户界面，也能让开发过程变得简单、快速。并且可以在一定程度上提高代码的可复用性，而不用纯粹的复制粘贴。</p>
<p>BEM 的意思就模块（Block）、元素（Element）、修饰符（Modifier），使用这种命名方式可以让 CSS 的类名变得有实际意义且能自我解释，具有更高的开发友好性。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">Block - 模块，名字的单词之间用 `-` 符号连接</span><br><span class="line">Element - 元素，模块中的子元素，用 `__` 符号连接</span><br><span class="line">Modifier - 修饰符，表示父元素或子元素的其他形态，用 `--` 符号连接</span><br></pre></td></tr></table></figure>

<p>在没用 BEM 之前，我们可能会这样组织 CSS 类名：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- S Search Bar 模块 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"search-bar"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span>=<span class="string">"input"</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- / input 输入框 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn"</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- / button 搜索按钮 --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- E Search Bar 模块 --&gt;</span></span><br></pre></td></tr></table></figure>

<p>上述写法虽然也给 class 赋予了一定的语义，但容易产生样式冲突的情况。</p>
<p>用 BEM 命名重写之后：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- S Search Bar 模块 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"search-bar"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span>=<span class="string">"search-form__input"</span>/&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- / input 输入框子元素 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"search-form__button"</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- / button 搜索按钮子元素 --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- E Search Bar 模块 --&gt;</span></span><br></pre></td></tr></table></figure>

<p>这样命名的好处是，模块语义化了，便于后期的维护，而且减少了 CSS 样式的层层嵌套，提升了网页的渲染效率。</p>
<p>通常在开发中使用 BEM 命名方法，会搭配 CSS 的预处理语言，如 SCSS 等。这可以一定程度上解决手写冗长命名的繁琐。</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">// 以下是 SCSS 代码</span><br><span class="line"><span class="selector-class">.search-bar</span> &#123;</span><br><span class="line">  &amp;__input &#123; ... &#125;</span><br><span class="line">  &amp;__button &#123; ... &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>将 BEM 用于中大型项目之后，我们会发现，当嵌套的层级越多时，类名也会越长，这给编写 HTML 代码带来了一些麻烦，同时也增加了 HTML 的文件大小。</p>
<p>那么问题来了，如何解决 BEM 命名冗长的问题？</p>
<h3 id="姓氏命名法"><a href="#姓氏命名法" class="headerlink" title="姓氏命名法"></a>姓氏命名法</h3><p>为了进一步简化 CSS 的命名，推荐的 CSS 命名规范并不严格遵循 BEM 规范，不强制使用两个下划线「_ _ 」来分隔 B 和 E，而 E 和 M 之间也不一定要用两个中划线做分隔「- -」。</p>
<p>如：<img src="https://static.yuanziwen.cn/blog/image/%E5%B8%83%E5%B1%80%E7%AC%94%E8%AE%B0-2.jpg_plain" alt="alt"><br>简化版的 BEM 好像也没有解决命名冗长的问题呀？</p>
<p>确实，如果按照这种继承的写法，再结合「给小孩取名」的生活场景，会出现下面的情况：</p>
<p>有位同学的名字叫「李小璐」，他的儿子名字叫「李小璐乃亮」，他的孙子叫「李小璐乃亮皮几万」。。。</p>
<p>而事实上，他的孩子只需要保留「李」姓就可以了，名字是可以随便取的。</p>
<p>所以在纠结怎么给一个元素做 CSS 命名的时候，联想一下我们身边的姓名是怎么起的吧。我们在业务中推广使用的「姓氏命名法」也因此而诞生。<br><img src="https://static.yuanziwen.cn/blog/image/%E5%B8%83%E5%B1%80%E7%AC%94%E8%AE%B0-3.jpg_plain" alt="alt"><br>如果要关联上 BEM 命名方法，姓氏命名法中的 Block 就是「姓」，Element 就是「名字」，而 Modifier 就表示这个人的某种状态，例如：「范冰冰 - - 很美」。</p>
<p>如何优化？</p>
<p>对于上面 app_market_answer 的案例，我们可以确定模块的姓氏是「app_market_answer」，名字随意取的话，我们可以尝试如下优化：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"app_market_answer"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"app_market_secheader"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"app_market_answer_list"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"app_market_answer_item"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"app_market_answer_itop"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"app_market_answer_imid"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"javascript:;"</span> <span class="attr">class</span>=<span class="string">"app_market_answer_ibtn"</span>&gt;</span>去围观<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>我们将 app_market_answer_item_top 改成了 app_market_answer_itop ，将 app_market_answer_item_middle 改成了 app_market_answer_imid ，只保留了「姓」。</p>
<p>如何进一步优化？</p>
<p>姓氏可以进一步简化，例如 app_market 可以看成是「复姓」，我们有时候为了书写便利，可以将两个单词的首字母结合在一起形成一个新的「单姓」，如 am 。追求便利的副作用之一是牺牲了代码的可读性。如果你做的项目或页面没有太大的二次维护或者交叉维护的可能性，推荐做此简化。</p>
<p>对于上面 app_market_answer 的案例，我们可以进一步优化成：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- am = app_market --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"am_answer"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"am_secheader"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"am_answer_list"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"am_answer_item"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"am_answer_itop"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"am_answer_imid"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"javascript:;"</span> <span class="attr">class</span>=<span class="string">"am_answer_ibtn"</span>&gt;</span>去围观<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>总结<br>1.ClassName 的命名应该尽量精短、明确，以英文单词命名，且全部字母为小写，避免意义不明的缩写<br>2.单词之间统一使用下划线 _ 或 - 连接<br>3.学习 BEM 的思想，参考使用姓氏命名法规范<br>4.定义样式模块，提高代码的可复用性</p>
<h2 id="响应式页面开发"><a href="#响应式页面开发" class="headerlink" title="响应式页面开发"></a>响应式页面开发</h2><p>响应式页面开发的能力可以定义为：</p>
<p>利用一套代码实现页面的布局和排版以适配不同分辨率的设备。</p>
<p>响应式页面开发要求我们解决两大问题：</p>
<p>为不同特性（如横屏还是竖屏等）的浏览器视窗使用不同的样式代码<br>让页面元素的尺寸能够依据浏览器视窗尺寸变化而平滑变化<br><img src="https://static.yuanziwen.cn/blog/image/%E5%B8%83%E5%B1%80%E7%AC%94%E8%AE%B0-4.jpg_plain" alt="alt"></p>
<h3 id="viewport-meta"><a href="#viewport-meta" class="headerlink" title="viewport meta"></a>viewport meta</h3><p>在页头 head 标签内添加 viewport meta 标签是实现响应式页面的第一步。</p>
<p>viewport meta 标签源于 Apple 公司，用来定义 iOS Safari 浏览器展示网页内容的可视范围及缩放比率。它虽然没有成为W3C标准，但是被其他绝大多数的移动端浏览器所支持（目前已知 IE Mobile 10 不支持）。W3C 尝试将 viewport meta 标签的功能进行标准化并通过 CSS 的 @viewport 规则来实现同样的功能，但这个标准目前还在草案中，兼容性也没有 viewport meta 标签好。</p>
<p>PageSpeed 准则<br>Google 网页性能分析工具 PageSpeed Insights 的其中一条准则就是：</p>
<p>网页应在 head 标签内添加 viewport meta 标签，以便优化在移动设备上的展示效果，其推荐的设置为：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1"</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="Media-Queries"><a href="#Media-Queries" class="headerlink" title="Media Queries"></a>Media Queries</h3><p>Media Queries 是为指定特性的浏览器视窗应用指定样式的手段，可以看成是 CSS 样式的过滤器或拦截器，通常情况下它可以通过 「@media 规则」结合「6 个查询参数」来拦截设备的浏览器特性（如显示类型、视窗高度、视窗宽度、横竖屏等），藉此可以为不同的特性应用不同的样式代码（相当于为不同的设备应用了不同的 CSS 样式）。</p>
<p>6 个参数</p>
<table><thead><th>参数名称</th><th>参数描述</th></thead><tbody><tr><td>min-width</td><td>当视窗宽度大于或等于指定值时，@media 规则下的样式将被应用
</td></tr><tr><td>max-width</td><td>当视窗宽度小于或等于指定值时，@media 规则下的样式将被应用</td></tr><tr><td>min-height</td><td>当视窗高度大于或等于指定值时，@media 规则下的样式将被应用</td></tr><tr><td>max-height</td><td>当视窗高度小于或等于指定值时，@media 规则下的样式将被应用</td></tr><tr><td>orientation=portrait</td><td>当视窗高度大于或等于宽度时，@media 规则下的样式将被应用</td></tr><tr><td>orientation=landscape</td><td>当视窗宽度大于高度时，@media 规则下的样式将被应用</td></tr></tbody></table>
#### 2 种用法
方法 1，使用 link 标签，根据指定特性引入特定的外部样式文件
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">media</span>=<span class="string">"(max-width: 640px)"</span> <span class="attr">href</span>=<span class="string">"max-640px.css"</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>方法 2，直接在 style 标签或 样式文件内使用 @media 规则</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="keyword">@media</span> (<span class="attribute">max-width:</span> <span class="number">640px</span>) &#123;</span><br><span class="line">  <span class="comment">/*当视窗宽度小于或等于 640px 时，这里的样式将生效*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>样式断点<br>Media Queries 所使用的查询参数的临界值又可称为「样式断点」。 在响应式页面开发过程中，对于「样式断点」我们需要掌握 2 个重要的技巧：</p>
<p>依据目标设备的分辨率，制定一套合适的样式断点，并为不同的断点定制必要的 CSS 样式。 移动端优先的页面，可使用 min-width 查询参数从小到大来定义断点。 如果我们页面的响应式设计要涵盖从手机到高清大屏幕，什么样的「样式断点」比较合理呢？</p>
<p>我们可以从业界一些热门可靠的 CSS 框架中寻找参考答案，例如 Bulma，其采用的「样式断点」有 5 个：</p>
<table><thead><th>断点名称</th><th>断点描述</th></thead><tbody><tr><td>mobile</td><td>移动设备断点，视窗宽度 ≤ 768 px
</td></tr><tr><td>tablet</td><td>平板电脑设备断点，视窗宽度 ≥ 769 px</td></tr><tr><td>desktop</td><td>桌面电脑断点，视窗宽度 ≥ 1024 px</td></tr><tr><td>widescreen</td><td>宽屏电脑断点，视窗宽度 ≥ 1216 px</td></tr><tr><td>fullhd</td><td>当高清宽屏电脑断点，视窗宽度 ≥ 1408 px</td></tr></tbody></table>
在实际工作中，「样式断点」的制定需要我们同视觉设计师一起沟通确认，因为视觉设计师可能需要根据不同的断点为页面设计不同的视觉表现。

<h3 id="一个小例子"><a href="#一个小例子" class="headerlink" title="一个小例子"></a>一个小例子</h3><p>如果针对 tablet 及以上的设备定制样式，我们就可以这样写了：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="keyword">@media</span> (<span class="attribute">min-width:</span> <span class="number">769px</span>) &#123;</span><br><span class="line">  <span class="comment">/* tablet 及以上的设备，页面背景色设置为红色 */</span></span><br><span class="line">  <span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: red;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="使用-Viewport-单位及-rem"><a href="#使用-Viewport-单位及-rem" class="headerlink" title="使用 Viewport 单位及 rem"></a>使用 Viewport 单位及 rem</h2><p>Media Queries 只解决了「为不同特性的浏览器视窗使用不同的样式代码」的问题，而 Viewport 单位及 rem 的应用，则是为了解决第二个问题：让页面元素的尺寸能够依据浏览器视窗尺寸变化而平滑变化。</p>
<p>关于 Viewport 单位及 rem 单位的基本概念，可通过下面的扩展阅读进行学习</p>
<p>BTW：本文所提及的 Viewport，译为「视窗」，其含义与扩展阅读中相关文章中的「视口」一致。</p>
<h3 id="方法-1-仅使用-vw-作为-CSS-长度单位"><a href="#方法-1-仅使用-vw-作为-CSS-长度单位" class="headerlink" title="方法 1 - 仅使用 vw 作为 CSS 长度单位"></a>方法 1 - 仅使用 vw 作为 CSS 长度单位</h3><p>在仅使用 vw 单位作为唯一 CSS 单位时，我们需遵守：</p>
<p>1.利用 Sass 函数将设计稿元素尺寸的像素单位转换为 vw 单位</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">// iPhone 6尺寸作为设计稿基准</span><br><span class="line">$vw_base: 375; </span><br><span class="line"><span class="keyword">@function</span> vw($px) &#123;</span><br><span class="line">    <span class="keyword">@return</span> ($px / $vm_base) * <span class="number">100vw</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2.无论是文本字号大小还是布局高宽、间距、留白等都使用 vw 作为 CSS 单位</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.mod_nav</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#fff</span>;</span><br><span class="line">    &amp;_list &#123;</span><br><span class="line">        <span class="selector-tag">display</span>: <span class="selector-tag">flex</span>;</span><br><span class="line">        padding: vw(15) vw(10) vw(10); // 内间距</span><br><span class="line">        &amp;_<span class="selector-tag">item</span> &#123;</span><br><span class="line">            <span class="attribute">flex</span>: <span class="number">1</span>;</span><br><span class="line">            <span class="attribute">text-align</span>: center;</span><br><span class="line">            font-size: vw(10); // 字体大小</span><br><span class="line">            &amp;_<span class="selector-tag">logo</span> &#123;</span><br><span class="line">                <span class="attribute">display</span>: block;</span><br><span class="line">                <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">                width: vw(40); // 宽度</span><br><span class="line">                height: vw(40); // 高度</span><br><span class="line">                <span class="selector-tag">img</span> &#123;</span><br><span class="line">                    <span class="attribute">display</span>: block;</span><br><span class="line">                    <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">                    <span class="attribute">max-width</span>: <span class="number">100%</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            &amp;_<span class="selector-tag">name</span> &#123;</span><br><span class="line">                <span class="attribute">margin-top</span>: <span class="built_in">vw</span>(<span class="number">2</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>1物理像素线（也就是普通屏幕下 1px ，高清屏幕下 0.5px 的情况）采用 transform 属性 scale 实现<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.mod_grid</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    &amp;::after &#123;</span><br><span class="line">        // 实现1物理像素的下边框线</span><br><span class="line">        content: '';</span><br><span class="line">        <span class="selector-tag">position</span>: <span class="selector-tag">absolute</span>;</span><br><span class="line">        <span class="selector-tag">z-index</span>: 1;</span><br><span class="line">        <span class="selector-tag">pointer-events</span>: <span class="selector-tag">none</span>;</span><br><span class="line">        <span class="selector-tag">background-color</span>: <span class="selector-id">#ddd</span>;</span><br><span class="line">        <span class="selector-tag">height</span>: 1<span class="selector-tag">px</span>;</span><br><span class="line">        <span class="selector-tag">left</span>: 0;</span><br><span class="line">        <span class="selector-tag">right</span>: 0;</span><br><span class="line">        <span class="selector-tag">top</span>: 0;</span><br><span class="line">        <span class="keyword">@media</span> <span class="keyword">only</span> screen <span class="keyword">and</span> (<span class="attribute">-webkit-min-device-pixel-ratio:</span> <span class="number">2</span>) &#123;</span><br><span class="line">            <span class="selector-tag">-webkit-transform</span>: <span class="selector-tag">scaleY</span>(0<span class="selector-class">.5</span>);</span><br><span class="line">            <span class="selector-tag">-webkit-transform-origin</span>: 50% 0%;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<p>4.对于需要保持高宽比的图，应改用 padding-top 实现</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.mod_banner</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    // 使用padding-top 实现宽高比为 100:750 的图片区域</span><br><span class="line">    padding-top: percentage(100/750);</span><br><span class="line">    <span class="selector-tag">height</span>: 0;</span><br><span class="line">    <span class="selector-tag">overflow</span>: <span class="selector-tag">hidden</span>;</span><br><span class="line">    <span class="selector-tag">img</span> &#123;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">        <span class="attribute">height</span>: auto;</span><br><span class="line">        <span class="attribute">position</span>: absolute;</span><br><span class="line">        <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">        <span class="attribute">top</span>: <span class="number">0</span>; </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote><blockquote><p>友情提醒：桌面版 Chrome 支持的字体大小默认不能小于 12PX，可通过 「chrome://settings/ 显示高级设置－网络内容－自定义字体－最小字号（滑到最小）」设置后再到模拟器里体验 DEMO。 </p>
</blockquote></blockquote>


<h3 id="方法-2-vw-搭配-rem，寻找最优解"><a href="#方法-2-vw-搭配-rem，寻找最优解" class="headerlink" title="方法 2 - vw 搭配 rem，寻找最优解"></a>方法 2 - vw 搭配 rem，寻找最优解</h3><p>方法 1 实现的响应式页面虽然看起来适配得很好，但是你会发现由于它是利用 Viewport 单位实现的布局，依赖于视窗大小而自动缩放，无论视窗过大还是过小，它也随着视窗过大或者过小，失去了最大最小宽度的限制，有时候不一定是我们所期待的展示效果。试想一下一个 750px 宽的设计稿在 1920px 的大屏显示器上的糟糕样子。</p>
<p>当然，你可以不在乎移动端页面在 PC 上的展现效果，但如果有低成本却有效的办法来修复这样的小瑕疵，是真切可以为部分用户提升体验的。</p>
<p>我们可以结合 rem 单位来实现页面的布局。rem 弹性布局的核心在于根据视窗大小变化动态改变根元素的字体大小，那么我们可以通过以下步骤来进行优化：</p>
<p>给根元素的字体大小设置随着视窗变化而变化的 vw 单位，这样就可以实现动态改变其大小<br>其他元素的文本字号大小、布局高宽、间距、留白都使用 rem 单位<br>限制根元素字体大小的最大最小值，配合 body 加上最大宽度和最小宽度，实现布局宽度的最大最小限制<br>核心代码实现如下：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">// rem 单位换算：定为 75px 只是方便运算，750px-75px、640-64px、1080px-108px，如此类推</span><br><span class="line">$vw_fontsize: 75; // iPhone 6尺寸的根元素大小基准值</span><br><span class="line"><span class="keyword">@function</span> rem($px) &#123;</span><br><span class="line">     <span class="keyword">@return</span> ($px / $vw_fontsize ) * <span class="number">1rem</span>;</span><br><span class="line">&#125;</span><br><span class="line">// 根元素大小使用 vw 单位</span><br><span class="line">$vw_design: 750;</span><br><span class="line"><span class="selector-tag">html</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: ($vw_fontsize / ($vw_design / <span class="number">2</span>)) * <span class="number">100vw</span>; </span><br><span class="line">    // 同时，通过Media Queries 限制根元素最大最小值</span><br><span class="line">    <span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width:</span> <span class="number">320px</span>) &#123;</span><br><span class="line">        <span class="selector-tag">font-size</span>: 64<span class="selector-tag">px</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">min-width:</span> <span class="number">540px</span>) &#123;</span><br><span class="line">        <span class="selector-tag">font-size</span>: 108<span class="selector-tag">px</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">// body 也增加最大最小宽度限制，避免默认100%宽度的 block 元素跟随 body 而过大过小</span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">max-width</span>: <span class="number">540px</span>;</span><br><span class="line">    <span class="attribute">min-width</span>: <span class="number">320px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>扩展阅读<br><a href="https://aotu.io/notes/2017/04/28/2017-4-28-CSS-viewport-units/" target="_blank" rel="noopener">《利用视口单位实现适配布局》</a></p>
<h2 id="高效CSS属性"><a href="#高效CSS属性" class="headerlink" title="高效CSS属性"></a>高效CSS属性</h2><p>我们知道，页面渲染的一般过程为 JS &gt; CSS &gt; 计算样式 &gt; 布局 &gt; 绘制 &gt; 渲染层合并:<br><img src="https://static.yuanziwen.cn/blog/image/%E5%B8%83%E5%B1%80%E7%AC%94%E8%AE%B0-3.jpg_plain" alt="alt"><br>其中，Layout（重排）和 Paint（重绘） 是整个环节中最为耗时的两环，所以我们应尽量避免使用触发这两个环节的 CSS 属性。</p>
<p>例如，最基本的一个注意点是：使用切换类名的方式来触发动画，而不是使用 diaplay: none 属性值，因为它会引起相关元素的重排和重绘。</p>
<p>除此之外，下面几个属性的替换使用也是值得推荐的：</p>
<ul><li>translate 属性替换 top/left/right/bottom</li><li>scale 属性换 width/height</li><li>opacity 属性替换 display/visibility</li></ul>

<p>这里推荐 <a href="https://csstriggers.com/" target="_blank" rel="noopener">CSS Triggers</a>，通过它你可以查阅到各 CSS 属性及其影响的环节，从而避免不小心使用到性能开销较大的属性。</p>
<p>除此之外，对动画渲染的优化还有其他方式，这里抛出 @登平登平 在 《<a href="https://weibo.com/p/1001603865643593165786" target="_blank" rel="noopener">H5 动画 60fps 之路</a>6》一文中的总结，同学们可以前往原文进行进一步的学习。</p>

      </div>
      <div class="post-copyright">
    <p class="copyright-item">
      <span>Author: </span>
      <a href="blog.yuanziwen.cn">Seven</a>
    </p>
    <p class="copyright-item">
      <span>Link: </span>
      <a href="blog.yuanziwen.cn/2017/03/04/布局笔记/">blog.yuanziwen.cn/2017/03/04/布局笔记/</a>
    </p>
    <p class="copyright-item">
      <span>License: </span><a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/" target="_blank">知识共享署名-非商业性使用 4.0 国际许可协议</a>
    </p>
  </div>
      <footer class="post-footer">
        <div class="post-tags">
            <a href="/tags/CSS/">CSS</a>
            </div>
        
        <nav class="post-nav"><a class="prev" href="/2017/06/20/Web-API/">
        <i class="iconfont icon-left"></i>
        <span class="prev-text nav-default">Web-API</span>
        <span class="prev-text nav-mobile">Prev</span>
      </a>
    </nav></footer>
    </article></div><div class="comments" id="comments"></div></div>
      </main>
  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  <script src="//unpkg.com/valine/dist/Valine.min.js"></script>
  
  <script type="text/javascript">
    var GUEST = ['nick','mail','link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item=>{
      return GUEST.indexOf(item)>-1;
    });
    new Valine({
        el: '#comments' ,
        verify: false,
        notify: false,
        appId: 'cxeaTV5BFDCxPmxoCcG9QPxf-gzGzoHsz',
        appKey: 's577OrPG5sB4Szom6mvHuI1X',
        placeholder: 'Just go go',
        avatar:'mm',
        guest_info: guest,
        pageSize:'10' || 10,
    });
  </script>

<footer id="footer" class="footer"><div class="social-links"><a href="mailto:yuanziwen7489757@gmail.com" class="iconfont icon-email" title="email"></a>
          <a href="https://juejin.im/user/59aa31a06fb9a02485103ddf" class="iconfont juejin" title="掘金"><div class="img"></div></a>
        <a href="https://github.com/yzw7489757" class="iconfont icon-github" title="github"></a>
        </div><div class="copyright">
  <!--<span class="division">|</span>
  <span class="theme-info">
    footer.theme - 
    <a class="theme-link" href="https://github.com/ahonn/hexo-theme-even">Even</a>
  </span>-->
  <span class="power-by">
   <a href="http://www.beian.miit.gov.cn" target="_blank">浙ICP备18011257号-1</a>
  </span>
  <span class="copyright-year">&copy;2017 - 2021<span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">Seven</span>
  </span>
</div>
</footer>

      <div class="back-to-top" id="back-to-top">
        <i class="iconfont icon-up"></i>
      </div>
    </div><script type="text/javascript" src="/lib/jquery/jquery.min.js"></script>
  <script type="text/javascript" src="/lib/slideout/slideout.js"></script>
  <script type="text/javascript" src="/lib/fancybox/jquery.fancybox.pack.js"></script>
  <script type="text/javascript" src="/js/src/even.js?v=2.11.0"></script>
<script>if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('/sw.js?t=1624262701310')
    .then(function () {console.log('ServiceWorker Register Successfully.')})
    .catch(function (e) {console.error(e)});
}
</script></body>
</html>
